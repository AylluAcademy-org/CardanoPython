FROM inputoutput/cardano-node:1.34.1@sha256:3bffeccf986986cece4d21c1901b564a3180880e136b0e221caa13e2757c751d

# WIP

WORKDIR /opt/app

COPY ./src /opt/app
COPY ./config /opt/app //** Path on Image: /opt/cardano/config **//

RUN cardano-node run --topology /opt/cardano/config/testnet-topology.json \
    --database-path /opt/cardano/data/db \
    --socket-path /opt/cardano/ipc/node.socket \
    --host-addr 127.0.0.1 \
    --port 3001 \
    --config /opt/cardano/config/testnet-config.json

RUN export CARDANO_NODE_SOCKET_PATH=/ipc/node.socket

CMD ["python3", "-m", "$WORKDIR./src/testtest.py"]